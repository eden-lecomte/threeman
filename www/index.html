<!DOCTYPE html>
<!--
    Copyright (c) 2012-2016 Adobe Systems Incorporated. All rights reserved.

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at
 
    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->

    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />  
    <link rel="stylesheet" type="text/css" href="css/transitions.css" />
    <link rel="stylesheet" href="css/switchery.min.css" />
    <link rel="stylesheet" href="css/dice.css" />
    <link rel="stylesheet" href="css/csshake.css" />

    <script>
        var switchery = [];
    </script>

    <title>3 Man</title>
</head>

<body>
    <div class="app">

        <!-- game -->
        <div id="game" class="container free">
            <div class="goBack menuToggles"><a href="index.html"></a></div>
            <div class="sound menuToggles"></div>

            <div class="threeman-score premium-only">
                <div class="previous three-man"><span class="number">0</span><br><span class="desc">Best<br>3Man</span></div>
                <div class="current three-man"><span class="number">0</span><br><span class="desc">This<br>3Man</span></div>
            </div>

            <div class="results">
                <div id="illustration"><img src="" /></div>

                <div id="diceResult"></div>
                    <div class="dice dice1 solid">
                        <div class="cube">
                            <div class="side front">
                            <div class="point pxcenter pycenter one red"></div>
                            </div>
                            <div class="side top">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            </div>
                            <div class="side left">
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            </div>
                            <div class="side right">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            <div class="point pxcenter pycenter"></div>
                            </div>
                            <div class="side bottom">
                            <div class="red point ptop pright"></div>
                            <div class="red point pbottom pleft"></div>
                            <div class="red point pxcenter pycenter"></div>
                            </div>
                            <div class="side back">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pycenter pleft"></div>
                            <div class="point pycenter pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            </div>
                        </div>
                    </div>

                    <div class="dice dice2 solid">
                        <div class="cube">
                            <div class="side front">
                            <div class="point pxcenter pycenter one red"></div>
                            </div>
                            <div class="side top">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            </div>
                            <div class="side left">
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            </div>
                            <div class="side right">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            <div class="point pxcenter pycenter"></div>
                            </div>
                            <div class="side bottom">
                            <div class="red point ptop pright"></div>
                            <div class="red point pbottom pleft"></div>
                            <div class="red point pxcenter pycenter"></div>
                            </div>
                            <div class="side back">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pycenter pleft"></div>
                            <div class="point pycenter pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            </div>
                        </div>
                    </div>                         
                <div class="instructions"></div>
                <div class="diceRoller rollInstructions"></div>
            </div>
            <div class="diceroll">
                <div id="dicecontainer">
                    <div class="dice dice1 solid">
                        <div class="cube">
                            <div class="side front">
                            <div class="point pxcenter pycenter one red"></div>
                            </div>
                            <div class="side top">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            </div>
                            <div class="side left">
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            </div>
                            <div class="side right">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            <div class="point pxcenter pycenter"></div>
                            </div>
                            <div class="side bottom">
                            <div class="red point ptop pright"></div>
                            <div class="red point pbottom pleft"></div>
                            <div class="red point pxcenter pycenter"></div>
                            </div>
                            <div class="side back">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pycenter pleft"></div>
                            <div class="point pycenter pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            </div>
                        </div>
                    </div>

                    <div class="dice dice2 solid">
                        <div class="cube">
                            <div class="side front">
                            <div class="point pxcenter pycenter one red"></div>
                            </div>
                            <div class="side top">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            </div>
                            <div class="side left">
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            </div>
                            <div class="side right">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            <div class="point pxcenter pycenter"></div>
                            </div>
                            <div class="side bottom">
                            <div class="red point ptop pright"></div>
                            <div class="red point pbottom pleft"></div>
                            <div class="red point pxcenter pycenter"></div>
                            </div>
                            <div class="side back">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pycenter pleft"></div>
                            <div class="point pycenter pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            </div>
                        </div>
                    </div> 
                    </div>              
                <div class="button"><a class="diceRoller" href="#game">Roll Dice</a></div>
            </div>
        </div>

        <!-- duel mode -->
        <div id="duel" class="container">
            <div id="orange" class="dueller">
                <div class="duelResult"></div>
                <div class="button"><a class="diceRollerDuel">Roll Dice</a></div>
            </div>
            <div id="pink" class="dueller">
                <div class="duelResult"></div>
                <div class="button"><a class="diceRollerDuel">Roll Dice</a></div>
            </div>
                <div class="dice dice1 solid">
                    <div class="cube">
                        <div class="side front">
                        <div class="point pxcenter pycenter one red"></div>
                        </div>
                        <div class="side top">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                        </div>
                        <div class="side left">
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                        </div>
                        <div class="side right">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            <div class="point pxcenter pycenter"></div>
                        </div>
                        <div class="side bottom">
                            <div class="red point ptop pright"></div>
                            <div class="red point pbottom pleft"></div>
                            <div class="red point pxcenter pycenter"></div>
                        </div>
                        <div class="side back">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pycenter pleft"></div>
                            <div class="point pycenter pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                        </div>
                    </div>
                </div>
                <div class="dice dice2 solid">
                    <div class="cube">
                        <div class="side front">
                            <div class="point pxcenter pycenter one red"></div>
                        </div>
                        <div class="side top">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                        </div>
                            <div class="side left">
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                        </div>
                        <div class="side right">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                            <div class="point pxcenter pycenter"></div>
                        </div>
                        <div class="side bottom">
                            <div class="red point ptop pright"></div>
                            <div class="red point pbottom pleft"></div>
                            <div class="red point pxcenter pycenter"></div>
                        </div>
                        <div class="side back">
                            <div class="point ptop pleft"></div>
                            <div class="point ptop pright"></div>
                            <div class="point pycenter pleft"></div>
                            <div class="point pycenter pright"></div>
                            <div class="point pbottom pleft"></div>
                            <div class="point pbottom pright"></div>
                        </div>
                    </div>
                </div>                   
                <div class="duelInstructions"></div>
                <div class="instructions"></div>
                <div class="rollInstructions"></div>
        </div>

        <!-- rules -->
        <div id="rules" class="container">
            <div class="goBack"><a href="#menu"></a></div>
            <div class="sound"></div>
            
            <div id="content" class="customScroll">
                <h1>How to play</h1>
                <p>Firstly, don't be a dick</p>
                <h2>General</h2>
                <!-- <hr> -->
                <p>Roll the dice until no one drinks as a result of your roll. If you roll nothing on the first roll of your turn, this is considered a 'virgin roll' - drink and roll again.</p>
                <h2>3 Man</h2>
                <!-- <hr> -->
                <p>When a <span class="dice orange" name="1"></span><span class="dice pink" name="2"></span> is rolled, this person becomes the 3 Man. They must drink to introduce themselves, and put on a silly hat.</p>
                <ul>
                    <li>Any time a <span class="dice orange" name="3"></span> appears on either dice, the 3 Man drinks.</li>
                    <li>If there are 2 <span class="dice orange" name="3"></span><span class="dice pink" name="3"></span>, then the 3 Man must drink 3 - <i>"3 for 3 man"</i>.</li>
                    <li>If the current 3 Man rolls a <span class="dice orange" name="1"></span><span class="dice pink" name="2"></span>, then he/she gets to nominate a new 3 Man.</li>
                    <li>Any time a new 3 Man is introduced, the current and new 3 Man must drink - <i>"Salutations"</i>.</li>
                    <li>Under no circumstances is the 3 Man allowed to stop playing while they are the current 3 Man.</li>
                </ul>
                <h2>Social - 10</h2>
                <!-- <hr> -->
                <p>Any time a total of 10 is rolled, everyone playing must drink.</p>
                <h2>Duels</h2>
                <!-- <hr> -->
                <p>Two players must duel by each rolling a dice, with the loser drinking the difference. The roll is also counted as a roll from the person who set up the duel. You could become 3 Man as a result of the duel!</p>
                <p>Duels occur on the following double rolls</p>
                <ul>
                    <li><span class="dice orange" name="4"></span><span class="dice pink" name="4"></span></li>
                    <li><span class="dice orange" name="3"></span><span class="dice pink" name="3"></span> (if there is no current 3 Man).</li>
                    <li><span class="dice orange" name="6"></span><span class="dice pink" name="6"></span> (if there is no current 3 Man).</li>
                </ul>
                <h2>Doubles</h2>
                <!-- <hr> -->
                <ul>
                    <li><span class="dice orange" name="1"></span><span class="dice pink" name="1"></span> Two drinks for me.</li>
                    <li><span class="dice orange" name="2"></span><span class="dice pink" name="2"></span> Two drinks for two different players.</li>
                    <li><span class="dice orange" name="3"></span><span class="dice pink" name="3"></span> Three drinks for 3 Man.</li>
                    <li><span class="dice orange" name="4"></span><span class="dice pink" name="4"></span> Duel.</li>
                    <li><span class="dice orange" name="5"></span><span class="dice pink" name="5"></span> Social - everyone drink.</li>
                    <li><span class="dice orange" name="6"></span><span class="dice pink" name="6"></span> Two drinks for everyone, except 3 Man.</li>

                </ul>
                <h2>7/11</h2>
                <!-- <hr> -->
                <p>Player to the left of you takes a drink.</p>
                <ul>
                    <li><span class="dice orange" name="2"></span><span class="dice pink" name="5"></span></li>
                    <li><span class="dice orange" name="3"></span><span class="dice pink" name="4"></span></li>
                    <li><span class="dice orange" name="6"></span><span class="dice pink" name="1"></span></li>
                </ul>
                <p>Player to the right of you takes a drink.</p>
                <ul>
                    <li><span class="dice orange" name="5"></span><span class="dice pink" name="6"></span></li>
                </ul>                
                <h2>Additional rules</h2>
                <!-- <hr> -->
                <p>There are some additional courtesy rules to play by.</p>
                <ul>
                    <li>Do not touch the phone unless it is your turn, or take a drink (the owner of the phone is exempt from this rule)</li>
                    <li>If you accept the phone from someone's hands, then you must finish your drink</li>
                </ul>

                <h2>Drink responsibly</h2>
                <p>We recommend you limit the amount you drink to the legal limits in your area, or lower. Do not drink and drive. Drink non-alcoholic beverages. We will not be responsible for any injuries, damage or harm relating to the use of this app.</p>
                <div class="button"><a href="#game">GET DRUNK!</a></div>
            </div>
        </div>        

        <!-- custom -->
        <div id="custom" class="container free">
            <div class="goBack"><a href="#menu"></a></div>
            <div class="sound"></div>
            
            <div id="content" class="customScroll">
                <h1>Options</h1>
                <p>Standard rules not getting you drunk quickly enough?</p>
                <p>Upgrade to 3 Man Pro Edition to access these!</p>
                <div class="upgrade-link free-only"><a href="#buy">Upgrade to Pro</a></div>
                <br>
                <h3>Start with a 3 Man</h3>
                <p>Have a designated 3 Man all ready? Poor guy.</p>
                <div class="toggles">
                    <label for='begin3man'>Start with a 3 Man</label><input type="checkbox" id="begin3man" class="js-switch"> <br>
                </div>
                
                <h3>Off the Table</h3>
                <p>Add a 1% chance to "roll the dice off the table". Choose the appropriate punishment below.</p>
                <div class="toggles" id="options">
                    <label for='finishDrink'>Finish Drink</label><input type="checkbox" id="finishDrink" class="js-switch"> <br>
                    <label for='become3Man'>Become 3 Man</label><input type="checkbox" id="become3Man" class="js-switch">  
                </div>

                <h3>Alpha and Omega</h3>
                <p>Masochist much? This setting doubles the drink values.</p>
                <div class="toggles">
                    <label for='doubleDrinks'>Double my drinks!</label><input type="checkbox" id="doubleDrinks" class="js-switch">
                </div>

                <div class="button premium-only"><a href="#game">GET DRUNK!</a></div>
                <div class="button free-only"><a class="purchase" href="#buy">3 Man Pro</a></div>                
                
            </div>
        </div>    

        <!-- buy -->
        <div id="buy" class="container free">
            <div class="goBack"><a href="#menu"></a></div>
            <div class="sound"></div>
            
            <div id="content" class="customScroll">
                <h1>3 Man Pro Edition</h1>
                <p>Want to zaz up your 3 Man experience even more?</p>
                <p>Unlock additional customization options, and toggle unique rules so you can play 3 Man the way you want!</p>
                <h3>What do you get?</h3>
                <p>A drinking game experience like no other!</p>
                <ul>
                    <li>- Start the game with a 3 Man - great for if you have a pause between games<br><br></li>
                    <li>- Double the drink count - be warned, this is absolutely brutal!<br><br></li>
                    <li>- Add a 1% chance to your roll that causes you to become the new 3 Man, finish your drink, or both!<br><br></li>
                    <li>- Track the number of drinks for the current and top 3 Man. No more disputing on who had the worst time as 3 Man<br><br></li>
                </ul>
                <div class="button free-only"><a id="purchase" class="purchase" href="#buy">Unlock Pro</a></div>                  
            </div>
        </div>            

        <!-- menu -->
        <div id="menu" class="container free">
            <div id="startGame">
                <div id="logo">
                    <img src="img/3manlogo.png" width="70%">
                    <img class="pro" src="img/3manribbonLarge.png" width="70%">                    
                </div>
                <div class="button"><a href="#game">Start</a></div>
                <div class="button"><a href="#rules">How to play</a></div>
                <div class="button"><a href="#custom">Options</a></div>
                <div class="upgrade-link free-only"><a href="#buy">Upgrade to Pro</a></div>
            </div>
        </div>
    </div>
    <footer>
    </footer>
      
    
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>        
    <script type="text/javascript" src="js/jquery.mobile.custom.min.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/inappstore.js"></script>    
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/ruleset.js"></script>        
    <script type="text/javascript" src="js/config.js"></script>
    <script src="js/switchery.min.js"></script>
    <script type="text/javascript" src="js/audio.js"></script>
    
    <script type="text/javascript">
        app.initialize();
        initGame.init();
        soundToggle();
        
        var elems = Array.prototype.slice.call(document.querySelectorAll('.js-switch'));

        elems.forEach(function(html) {
            switchery.push(new Switchery(html));
        });
        
        for (i = 0; i < switchery.length; i++) {
            switchery[i].disable();
        }


        var check3ManSwitch = document.querySelector('#become3Man');
        var finishDrinkSwitch = document.querySelector('#finishDrink');
        var doubleDrinksSwitch = document.querySelector('#doubleDrinks');
        var begin3manSwitch = document.querySelector('#begin3man');
        

        check3ManSwitch.onchange = function() {
            offTableNew3Man = check3ManSwitch.checked;
        };
        finishDrinkSwitch.onchange = function() {
            offTableFinishDrink = finishDrinkSwitch.checked;
        };      
        doubleDrinksSwitch.onchange = function() {
            if (doubleDrinksSwitch.checked) {
                drinkValue = 2;
            } else {
                drinkValue = 1;
            }
        };      
        begin3manSwitch.onchange = function() {
            threeManExists = begin3manSwitch.checked;
        };    

        document.addEventListener("backbutton", function (e) {
            if (location.hash == "#game") {
            
                navigator.notification.confirm(
                    'Return to menu?', // message
                    onConfirm,              // callback to invoke with index of button pressed
                    'Go back?',               // title
                    'Yes,No'          // buttonLabels
                );
                function onConfirm(buttonIndex){
                    if (buttonIndex==1){
                        //do nothing;
                        location.hash = '#menu';
                        location.reload();
                    } else {
                        //do nothing
                    };            
                }
            } else if (location.hash = '#menu') {
                navigator.app.exitApp();
            } else if (location.hash = '#duel') {
                alert('No, you can\'t leave a duel.');                
            } else {
                location.hash = '#menu';
            }            
        }, false );

    </script>
</body>

</html>